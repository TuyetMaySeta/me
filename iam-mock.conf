# Mock IAM service configuration for development
# Replace this with actual EMS-IAM service configuration

server {
    listen 80;
    server_name localhost;

    # Mock health endpoint
    location /api/v1/health {
        add_header Content-Type application/json;
        return 200 '{"status": "ok", "service": "mock-iam"}';
    }

    # Mock user endpoints
    location /api/v1/users {
        add_header Content-Type application/json;
        if ($request_method = POST) {
            return 201 '{"id": "mock-user-id", "email": "mock@example.com", "message": "User created (mock)"}';
        }
        if ($request_method = GET) {
            return 200 '{"users": [], "message": "Mock IAM service"}';
        }
        return 404 '{"error": "Not found"}';
    }

    # Mock auth endpoints
    location /api/v1/auth {
        add_header Content-Type application/json;
        return 200 '{"token": "mock-token", "message": "Mock authentication"}';
    }

    # Default response
    location / {
        add_header Content-Type application/json;
        return 200 '{"message": "Mock EMS-IAM Service", "note": "Replace with actual IAM service"}';
    }
}
